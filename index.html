<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>BUG总归会有的</title>
<script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
<style>
</style>
</head>
<body>
<div class="autotype" id="autotype">
	<center>
	<br>
	<p>BUG总归会有的</p>
	<p>Life's a struggle</p>
	<p>日子还要过</p>
	<p>品尝喜怒哀乐之后</p>
	<p>又是数不尽的troubles</p>
	<br>
	</center>
</div>


<script>
$.fn.autotype = function() {
    var $text = $(this);

    console.log('$text:', $text);
    var str = $text.html(); //返回被选 元素的内容
    console.log('str:', str);
    var index = 0;
    var x = $text.html('');
    console.log('x:', x);
    //$text.html()和$(this).html('')有区别

    var timer = setInterval(function() {
        //substr(index, 1) 方法在字符串中抽取从index下标开始的一个的字符
        var current = str.substr(index, 1);

        if (current == '<') {
            //indexOf() 方法返回">"在字符串中首次出现的位置。
            index = str.indexOf('>', index) + 1;
        } else {
            index++;
        }

        //console.log(["0到index下标下的字符",str.substring(0, index)],["符号",index & 1 ? '_': '']);
        //substring() 方法用于提取字符串中介于两个指定下标之间的字符
        $text.html(str.substring(0, index) + (index & 1 ? '_' : ''));
        index > $text.html().length + 10 && (index = 0);
        /*if(index >= str.length){
        	clearInterval(timer);

        }*/
    }, 100);
};
$("#autotype").autotype();
</script>
<embed src="//music.163.com/style/swf/widget.swf?sid=145223&amp;type=2&amp;auto=1&amp;width=320&amp;height=66" width="340" height="86"  allowNetworking="all">
</embed>
</body>
</html>
